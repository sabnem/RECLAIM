{% extends 'base.html' %}
{% block content %}
<!-- Hero Section -->
<section class="py-5 text-center rounded-4 shadow-sm mb-5 hero-section">
    <h1 class="display-5 fw-bold mb-3">Welcome to the Lost & Found Portal</h1>
    <p class="lead mb-4">Quickly report, search, and retrieve lost and found items in your community.</p>
    {% if user.is_authenticated %}
        <div class="d-flex flex-wrap justify-content-center gap-3 mt-4">
            <a href="{% url 'report_item' %}" class="btn btn-light btn-lg px-4 fw-semibold shadow-sm"><i class="bi bi-plus-circle"></i> Report Item</a>
            <a href="{% url 'item_list' %}" class="btn btn-outline-light btn-lg px-4 fw-semibold"><i class="bi bi-search"></i> View All Items</a>
        </div>
    {% else %}
        <div class="d-flex flex-wrap justify-content-center gap-3 mt-4">
            <a href="{% url 'login' %}" class="btn btn-light btn-lg px-4 fw-semibold"><i class="bi bi-box-arrow-in-right"></i> Login</a>
            <a href="{% url 'register' %}" class="btn btn-outline-light btn-lg px-4 fw-semibold"><i class="bi bi-person-plus"></i> Register</a>
        </div>
    {% endif %}
</section>

<!-- Features Section -->
<section class="container mb-5">
    <h2 class="text-center fw-bold mb-4">Our Features</h2>
    <div class="swiper featureSwiper">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <div class="card h-100 border-0 p-4 text-center shadow-sm rounded-4 feature-card">
                    <h4 class="card-title mb-3"><i class="bi bi-search text-primary"></i> Find Items</h4>
                    <p class="card-text text-muted">Browse and search for lost or found items. Use filters to quickly locate your belongings.</p>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="card h-100 border-0 p-4 text-center shadow-sm rounded-4 feature-card">
                    <h4 class="card-title mb-3"><i class="bi bi-plus-circle text-success"></i> Report Lost/Found</h4>
                    <p class="card-text text-muted">Report items with details and photos to help reunite owners with their property.</p>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="card h-100 border-0 p-4 text-center shadow-sm rounded-4 feature-card">
                    <h4 class="card-title mb-3"><i class="bi bi-chat-dots text-warning"></i> In-App Messaging</h4>
                    <p class="card-text text-muted">Communicate securely to arrange returns and share images or details directly in chat.</p>
                </div>
            </div>
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>
</section>

<!-- Safety & Guidelines Section -->
<section class="container mb-5">
    <h2 class="text-center fw-bold mb-4">Stay Safe & Informed</h2>
    <div class="swiper tipsSwiper">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <div class="p-4 rounded-4 shadow-sm h-100 text-center tips-card">
                    <h5 class="fw-bold mb-3"><i class="bi bi-shield-check text-primary"></i> Safety Tips</h5>
                    <ul class="list-unstyled text-start mx-auto" style="max-width: 300px;">
                        <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Meet in public, well-lit places.</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Bring a friend or inform someone.</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Verify identities before exchanging items.</li>
                        <li><i class="bi bi-check-circle text-success"></i> Trust instincts; cancel if unsafe.</li>
                    </ul>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="p-4 rounded-4 shadow-sm h-100 text-center tips-card">
                    <h5 class="fw-bold mb-3"><i class="bi bi-file-earmark-text text-info"></i> Terms & Guidelines</h5>
                    <ul class="list-unstyled text-start mx-auto" style="max-width: 300px;">
                        <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Only report items genuinely lost/found.</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Respect other users and communicate honestly.</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Return items promptly and confirm.</li>
                        <li><i class="bi bi-check-circle text-success"></i> Violations may lead to account suspension.</li>
                    </ul>
                    <a href="{% url 'terms_and_conditions' %}" target="_blank" class="btn btn-outline-primary mt-3">Read Full Terms</a>
                </div>
            </div>
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>
</section>

<!-- Swiper CSS & JS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<style>
  /* Smooth transition for dark/light mode */
  body, .hero-section, .feature-card, .tips-card, .btn-outline-light {
      transition: background-color 0.5s ease, color 0.5s ease, border-color 0.5s ease, box-shadow 0.5s ease;
  }

  /* Hero gradient & card styles */
  .hero-section { background: linear-gradient(135deg,#6a11cb,#2575fc); color: white; }
  .feature-card, .tips-card { transition: all 0.3s ease; }

  /* Swiper effects */
  .swiper-slide { transition: transform 0.6s ease, box-shadow 0.6s ease; }
  .swiper-slide-active { transform: scale(1.15); z-index: 10; box-shadow: 0 12px 28px rgba(0,0,0,0.2); }
  .swiper-slide-next, .swiper-slide-prev { transform: scale(0.9); opacity: 0.7; }
  .swiper-slide-prev-prev, .swiper-slide-next-next { transform: scale(0.8); opacity: 0.5; }

  /* Dark Mode */
  body.dark-mode { background-color: #121212; color: #e0e0e0; }
  body.dark-mode .hero-section { background: linear-gradient(135deg,#333399,#6611cc); }
  body.dark-mode .card, body.dark-mode .tips-card { background-color: #1e1e1e; color: #e0e0e0; }
  body.dark-mode .btn-outline-light { color: #e0e0e0; border-color: #e0e0e0; }
  body.dark-mode .btn-outline-light:hover { background-color: #e0e0e0; color: #121212; }
</style>

<script>
  const commonSwiperConfig = {
    effect: "coverflow",
    grabCursor: true,
    centeredSlides: true,
    slidesPerView: "auto",
    spaceBetween: 30,
    coverflowEffect: { rotate: 25, stretch: 0, depth: 250, modifier: 1.5, slideShadows: true },
    loop: true,
    speed: 1000,
    autoplay: { delay: 5000, disableOnInteraction: false, pauseOnMouseEnter: true },
    observer: true,
    observeParents: true,
    pagination: { clickable: true },
    navigation: { nextEl: ".swiper-button-next", prevEl: ".swiper-button-prev" }
  };

  new Swiper(".featureSwiper", commonSwiperConfig);
  new Swiper(".tipsSwiper", {...commonSwiperConfig, spaceBetween: 25, coverflowEffect: { rotate: 20, depth: 220, modifier: 1.4 }});

  // Dark Mode Toggle with icon change
  const darkModeToggle = document.getElementById('darkModeToggle');
  const darkModeIcon = document.getElementById('darkModeIcon');
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

  if (prefersDark) {
      document.body.classList.add('dark-mode');
      darkModeIcon.className = 'bi bi-sun-fill';
      darkModeToggle.innerHTML = '<i class="bi bi-sun-fill"></i> Light Mode';
  }

  darkModeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      if (document.body.classList.contains('dark-mode')) {
          darkModeIcon.className = 'bi bi-sun-fill';
          darkModeToggle.innerHTML = '<i class="bi bi-sun-fill"></i> Light Mode';
      } else {
          darkModeIcon.className = 'bi bi-moon-fill';
          darkModeToggle.innerHTML = '<i class="bi bi-moon-fill"></i> Dark Mode';
      }
  });
</script>

{% endblock %}
