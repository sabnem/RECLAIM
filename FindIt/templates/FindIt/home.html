{% extends 'base.html' %}
{% load static %}
{% block content %}
<!-- Custom Styles -->
    <link rel="stylesheet" href="{% static 'css/swipe.css' %}">
<!-- Hero Section -->
<section class="py-5 text-center rounded-4 shadow-sm mb-5 hero-section">
    <h1 class="display-5 fw-bold mb-3">Welcome to the Lost & Found Portal</h1>
    <p class="lead mb-4">Quickly report, search, and retrieve lost and found items in your community.</p>
    {% if user.is_authenticated %}
        <div class="d-flex flex-wrap justify-content-center gap-3 mt-4">
            <a href="{% url 'report_item' %}" class="btn btn-light btn-lg px-4 fw-semibold shadow-sm"><i class="bi bi-plus-circle"></i> Report Item</a>
            <a href="{% url 'item_list' %}" class="btn btn-light btn-lg px-4 fw-semibold shadow-sm"><i class="bi bi-search"></i> View All Items</a>
        </div>
    {% else %}
        <div class="d-flex flex-wrap justify-content-center gap-3 mt-4">
            <a href="{% url 'login' %}" class="btn btn-light btn-lg px-4 fw-semibold"><i class="bi bi-box-arrow-in-right"></i> Login</a>
            <a href="{% url 'register' %}" class="btn btn-outline-light btn-lg px-4 fw-semibold"><i class="bi bi-person-plus"></i> Register</a>
        </div>
    {% endif %}
</section>

<!-- Features Section -->
<section class="container mb-5">
    <h2 class="text-center fw-bold mb-4">Our Features</h2>
    <div class="swiper featureSwiper">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <div class="card h-100 border-0 p-4 text-center shadow-sm rounded-4 feature-card">
                    <h4 class="card-title mb-3"><i class="bi bi-search text-primary"></i> Find Items</h4>
                    <p class="card-text text-muted">Browse and search for lost or found items. Use filters to quickly locate your belongings.</p>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="card h-100 border-0 p-4 text-center shadow-sm rounded-4 feature-card">
                    <h4 class="card-title mb-3"><i class="bi bi-plus-circle text-success"></i> Report Lost/Found</h4>
                    <p class="card-text text-muted">Report items with details and photos to help reunite owners with their property.</p>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="card h-100 border-0 p-4 text-center shadow-sm rounded-4 feature-card">
                    <h4 class="card-title mb-3"><i class="bi bi-chat-dots text-warning"></i> In-App Messaging</h4>
                    <p class="card-text text-muted">Communicate securely to arrange returns and share images or details directly in chat.</p>
                </div>
            </div>
        </div>
        <div class="swiper-pagination feature-pagination"></div>
        <div class="swiper-button-next feature-next"></div>
        <div class="swiper-button-prev feature-prev"></div>
    </div>
</section>

<!-- Safety & Guidelines Section -->
<section class="container mb-5">
    <h2 class="text-center fw-bold mb-4">Stay Safe & Informed</h2>
    <div class="swiper tipsSwiper">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <div class="p-4 rounded-4 shadow-sm h-100 text-center tips-card">
                    <h5 class="fw-bold mb-3"><i class="bi bi-shield-check text-primary"></i> Safety Tips</h5>
                    <ul class="list-unstyled text-start mx-auto" style="max-width: 300px;">
                        <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Meet in public, well-lit places.</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Bring a friend or inform someone.</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Verify identities before exchanging items.</li>
                        <li><i class="bi bi-check-circle text-success"></i> Trust instincts; cancel if unsafe.</li>
                    </ul>
                </div>
            </div>
            <div class="swiper-slide">
                <div class="p-4 rounded-4 shadow-sm h-100 text-center tips-card">
                    <h5 class="fw-bold mb-3"><i class="bi bi-file-earmark-text text-info"></i> Terms & Guidelines</h5>
                    <ul class="list-unstyled text-start mx-auto" style="max-width: 300px;">
                        <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Only report items genuinely lost/found.</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Respect other users and communicate honestly.</li>
                        <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Return items promptly and confirm.</li>
                        <li><i class="bi bi-check-circle text-success"></i> Violations may lead to account suspension.</li>
                    </ul>
                    <a href="{% url 'terms_and_conditions' %}" target="_blank" class="btn btn-outline-primary mt-3">Read Full Terms</a>
                </div>
            </div>
            <div class="swiper-slide">
              <div class="p-4 rounded-4 shadow-sm h-100 text-center tips-card">
                <h5 class="fw-bold mb-3">
                  <i class="bi bi-shield-lock text-info"></i> Privacy Policy
                </h5>
                <ul class="list-unstyled text-start mx-auto" style="max-width: 300px;">
                  <li class="mb-2"><i class="bi bi-check-circle text-success"></i> We protect your personal data with care.</li>
                  <li class="mb-2"><i class="bi bi-check-circle text-success"></i> Your information is only used to connect owners and finders.</li>
                  <li class="mb-2"><i class="bi bi-check-circle text-success"></i> We never sell or rent your data to third parties.</li>
                  <li><i class="bi bi-check-circle text-success"></i> You can request deletion of your data anytime.</li>
                </ul>
                <a href="{% url 'privacy_policy' %}" target="_blank" class="btn btn-outline-secondary mt-3">
                  Read Full Policy
                </a>
              </div>
            </div>
        </div>
        <div class="swiper-pagination tips-pagination"></div>
        <div class="swiper-button-next tips-next"></div>
        <div class="swiper-button-prev tips-prev"></div>
    </div>
</section>

<!-- Swiper CSS & JS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<script>
  const commonSwiperConfig = {
    effect: "coverflow",
    grabCursor: true,
    centeredSlides: true,
    slidesPerView: "auto",
    spaceBetween: 30,
    coverflowEffect: { rotate: 25, stretch: 0, depth: 250, modifier: 1.5, slideShadows: true },
    loop: true,
    speed: 1000,
    observer: true,
    observeParents: true,
  };

  // Features Swiper (5s autoplay)
  new Swiper(".featureSwiper", {
    ...commonSwiperConfig,
    autoplay: { delay: 6000, disableOnInteraction: false, pauseOnMouseEnter: true },
    pagination: { el: ".feature-pagination", clickable: true },
    navigation: { nextEl: ".feature-next", prevEl: ".feature-prev" }
  });

  // Tips Swiper (faster autoplay 3s)
  new Swiper(".tipsSwiper", {
    ...commonSwiperConfig,
    autoplay: { delay: 3000, disableOnInteraction: false, pauseOnMouseEnter: true },
    spaceBetween: 25,
    coverflowEffect: { rotate: 20, depth: 220, modifier: 1.4 },
    pagination: { el: ".tips-pagination", clickable: true },
    navigation: { nextEl: ".tips-next", prevEl: ".tips-prev" }
  });

  // Dark Mode Toggle with icon change
  const darkModeToggle = document.getElementById('darkModeToggle');
  const darkModeIcon = document.getElementById('darkModeIcon');
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

  if (prefersDark) {
      document.body.classList.add('dark-mode');
      darkModeIcon.className = 'bi bi-sun-fill';
      darkModeToggle.innerHTML = '<i class="bi bi-sun-fill"></i> Light Mode';
  }

  darkModeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      if (document.body.classList.contains('dark-mode')) {
          darkModeIcon.className = 'bi bi-sun-fill';
          darkModeToggle.innerHTML = '<i class="bi bi-sun-fill"></i> Light Mode';
      } else {
          darkModeIcon.className = 'bi bi-moon-fill';
          darkModeToggle.innerHTML = '<i class="bi bi-moon-fill"></i> Dark Mode';
      }
  });
</script>
{% endblock %}
